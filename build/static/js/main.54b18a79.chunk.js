(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(2),r=n.n(o),i=(n(14),n(3)),c=n(4),l=n(6),u=n(5),m=n(7),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).statusChangeCallback=function(e){"connected"===e.status?(console.log(e),n.setState({loggedStatus:!0,userID:e.session.mid}),n.getPersonalData(),n.getFriends()):n.setState({loggedStatus:!1})},n.checkLoginStatus=function(){window.VK.Auth.getLoginStatus(function(e){return n.statusChangeCallback(e)})},n.handleLogin=function(){window.VK.Auth.login(function(e){e.session?(console.log(e),n.setState({errorMessage:""})):n.setState({errorMessage:"User clicked Cancel in the login window."})},[window.VK.access.FRIENDS])},n.handleLogout=function(){window.VK.Auth.logout()},n.getPersonalData=function(){window.VK.Api.call("users.get",{user_ids:n.state.userID,fields:"photo_100,online",v:"5.95"},function(e){e.response&&n.setState({picture:e.response[0].photo_100,firstName:e.response[0].first_name,lastName:e.response[0].last_name,online:e.response[0].online})})},n.getFriends=function(){window.VK.Api.call("friends.get",{user_ids:n.state.userID,order:"hints",fields:"first_name,last_name",name_case:"nom",count:"10",v:"5.95"},function(e){e.response&&n.setState({friendList:e.response.items})})},n.showData=function(){if(n.state.loggedStatus){var e=n.state.friendList.map(function(e){var t="".concat(e.first_name," ").concat(e.last_name);return s.a.createElement("li",{key:e.id},t)}),t="".concat(n.state.firstName," ").concat(n.state.lastName);return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-auto"},s.a.createElement("img",{className:"img-thumbnail",src:n.state.picture,alt:"avatar",width:"300"})),s.a.createElement("div",{className:"col"},s.a.createElement("h3",null,t),n.state.online?s.a.createElement("p",null,"Online"):s.a.createElement("p",null,"Offline"),s.a.createElement("ul",{className:"list-unstyled"},e)))}},n.state={loggedStatus:!1,userID:"",firstName:"",lastName:"",friendList:[],online:!1,errorMessage:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.vkAsyncInit=function(){window.VK.init({apiId:7031686}),window.VK.Observer.subscribe("auth.statusChange",function(t){e.statusChangeCallback(t)}),e.checkLoginStatus()},setTimeout(function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://vk.com/js/api/openapi.js?161",e.async=!0,document.getElementById("vk_api_transport").appendChild(e)},0)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"vk_api_transport"}),s.a.createElement("div",null,this.showData()),this.state.loggedStatus?s.a.createElement("button",{className:"btn btn-primary",onClick:this.handleLogout},"Logout"):s.a.createElement("button",{className:"btn btn-primary",onClick:this.handleLogin},"Login"),this.state.errorMessage?s.a.createElement("p",null,this.state.errorMessage):null)}}]),t}(s.a.Component),g=function(){return s.a.createElement("div",{className:"container pt-5"},s.a.createElement(d,null))};r.a.render(s.a.createElement(g,null),document.getElementById("root"));"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(){return console.log("Service worker registered")}).catch(function(e){console.error("Registration failed, error:",e)})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.54b18a79.chunk.js.map